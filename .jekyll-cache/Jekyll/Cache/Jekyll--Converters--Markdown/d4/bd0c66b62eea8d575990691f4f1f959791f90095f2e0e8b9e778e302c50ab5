I"‰5<h2 id="comandos-b√°sicos-do-apache-hadoop-28x">Comandos b√°sicos do Apache Hadoop 2.8.x</h2>

<h4 id="requisitos-iniciais">Requisitos iniciais:</h4>

<ul>
  <li>1) Tenha o Apache Hadoop configurado em modo <em><a href="/config-hadoop-single-node/" target="_blank">single node</a></em> ou <em><a href="/config-hadoop-multi-node/" target="_blank">multi node</a></em></li>
</ul>

<p>*ps: Este tutorial foi testado com o sistema operacional Ubuntu 16.04 e 14.04. Caso deseje configurar em uma vers√£o mais antiga, recente ou em outro SO, pequenas mudan√ßas podem ocorrer nos procedimentos apresentados.</p>

<h3 id="tldr">TL;DR</h3>

<p>O projeto Apache Hadoop √© um <em>software</em> de c√≥digo aberto mantido pela Apache Foundation que tem como prop√≥sito fornecer uma implementa√ß√£o de c√≥digo aberto do modelo de programa√ß√£o <em>MapReduce</em> de forma confi√°vel e escal√°vel. O Hadoop √© projetado para ampliar o processamento de um √∫nico servidor em milhares de m√°quinas, onde cada uma das m√°quinas oferecem poder de processamento e armazenamento local. Esta ferramenta √© utilizada para processamento em <em>batch</em> de grandes volumes de dados (<em>Big Data</em>). Atualmente, o Apache Hadoop √© uma das ferramentas mais conhecidas para processamento distribu√≠do, mas existem outras ferramentas similares que se integram ao Hadoop, como o <strong>Apache Spark</strong>, <strong>Apache Storm</strong> e dentre outros.</p>

<p>*ps: para mais informa√ß√µes a respeito do Apache Hadoop acessem o site <a href="http://hadoop.apache.org/">http://hadoop.apache.org/</a></p>

<h3 id="lets-get-started">Let‚Äôs get started</h3>

<p>Neste tutorial voc√™ ir√° aprender a utilizar alguns comandos b√°sicos do Apache Hadoop. Al√©m disso, ser√° mostrado como gerenciar arquivos no sistema de arquivos <em>Hadoop Distributed File System</em> (HDFS).</p>

<p style="text-align: center;">
  <img src="/assets/images/trash-pc.gif" style="width: 50%;" />
</p>

<h3 id="hadoop-scripts-tools">Hadoop Scripts Tools</h3>

<p>O Apache Hadoop fornece por padr√£o alguns <em>scripts</em> para o gerenciamento das inst√¢ncias da ferramenta. O diret√≥rio padr√£o onde se encontram os <em>scripts</em> √© o <code class="highlighter-rouge">bash hadoop/sbin</code>.</p>

<p>Observa-se que na pasta <code class="highlighter-rouge">bash hadoop/sbin</code> encontra-se os seguintes <em>scripts</em> que inclui sua vers√£o para sistemas <em>bash</em> (Linux e MacOS) como tamb√©m para o <em>prompt</em> de comando do sistema operacional MS Windows.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>distribute-exclude.sh    start-all.cmd        stop-balancer.sh
hadoop-daemon.sh         start-all.sh         stop-dfs.cmd
hadoop-daemons.sh        start-balancer.sh    stop-dfs.sh
hdfs-config.cmd          start-dfs.cmd        stop-secure-dns.sh
hdfs-config.sh           start-dfs.sh         stop-yarn.cmd
httpfs.sh                start-secure-dns.sh  stop-yarn.sh
kms.sh                   start-yarn.cmd       yarn-daemon.sh
mr-jobhistory-daemon.sh  start-yarn.sh        yarn-daemons.sh
refresh-namenodes.sh     stop-all.cmd
slaves.sh                stop-all.sh
</code></pre></div></div>

<p>Por comodidade √© mais pr√°tico configurarmos este diret√≥rio no arquivo <code class="highlighter-rouge">bash ~/.bashrc</code> ou no <code class="highlighter-rouge">bash /etc/profile</code>. Para isso devemos especificar o caminho <code class="highlighter-rouge">bash hadoop/sbin</code> no <em>Path</em> do sistema, adicionando o seguinte comando.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">HADOOP_INSTALL</span><span class="o">=</span>/opt/hadoop
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:<span class="nv">$HADOOP_INSTALL</span>/sbin
</code></pre></div></div>

<p>Os comandos b√°sicos mais utilizados √© o de iniciar o sistema de arquivos HDFS e do Hadoop YARN. Como por exemplo:</p>

<ul>
  <li>Iniciar o sistema de arquivos distribu√≠do HDFS</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~<span class="nv">$ </span>start-dfs.sh
</code></pre></div></div>

<ul>
  <li>Iniciar o Hadoop Yarn</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~<span class="nv">$ </span>start-yarn.sh
</code></pre></div></div>

<ul>
  <li>Finalizar os processos do sistema de arquivos HDFS</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~<span class="nv">$ </span> stop-dfs.sh
</code></pre></div></div>

<ul>
  <li>Finalizar os processos o Hadoop Yarn</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~<span class="nv">$ </span>stop-yarn.sh
</code></pre></div></div>

<p>Existem alguns <em>scripts deprecated</em> neste diret√≥rio, mas que ainda funcionam perfeitamente com o Hadoop:</p>

<ul>
  <li>Inicia todos os processos relacionados com Hadoop e o HDFS</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~<span class="nv">$ </span>start-all.sh
</code></pre></div></div>

<ul>
  <li>Finaliza todos os processos relacionados com Hadoop e o HDFS</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~<span class="nv">$ </span>stop-all.sh
</code></pre></div></div>

<h3 id="comandos-b√°sicos-do-apache-hadoop">Comandos B√°sicos do Apache Hadoop</h3>

<p>O Apache Hadoop fornece alguns arquivos bin√°rios onde podem ser realizadas algumas opera√ß√µes importantes. O diret√≥rio padr√£o onde se encontra os bin√°rios √© o <code class="highlighter-rouge">bash hadoop/bin</code>, nele voc√™ encontra os seguintes bin√°rios:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>container-executor  hdfs      mapred.cmd               yarn
hadoop              hdfs.cmd  rcc                      yarn.cmd
hadoop.cmd          mapred    test-container-executor
</code></pre></div></div>

<p>Por comodidade √© mais pr√°tico configurarmos este diret√≥rio no arquivo <code class="highlighter-rouge">bash ~/.bashrc</code> ou no <code class="highlighter-rouge">bash /etc/profile</code>. Para isso devemos especificar o caminho <code class="highlighter-rouge">bash hadoop/bin</code> no <em>Path</em> do sistema, adicionando o seguinte comando.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">HADOOP_INSTALL</span><span class="o">=</span>/opt/hadoop
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:<span class="nv">$HADOOP_INSTALL</span>/bin
</code></pre></div></div>

<p>*ps: N√£o se esque√ßa de atualizar as vari√°veis de ambiente com o comando <code class="highlighter-rouge">bash source ~/.bashrc</code> our <code class="highlighter-rouge">bash /etc/profile</code></p>

<p>O comando mais utilizado √© o HDFS, com ele √© poss√≠vel executar as rotinas <em>MapReduce</em>. Para executar um c√≥digo <em>MapReduce</em> basta executar o seguinte comando:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~<span class="nv">$ </span>hadoop jar WordCount.jar WordCount /input /output
</code></pre></div></div>

<p>Com o comando HDFS tamb√©m √© poss√≠vel gerenciar os arquivos que est√£o no sistema de arquivos do Hadoop. A seguir e demonstrado alguns exemplos b√°sicos de comando b√°sicos no sistema de arquivos HDFS, note que todos os comando apresentados se assemelham ao comandos do <em>bash</em>.</p>

<p>*ps: Todos os comando iniciam com o prefixo <code class="highlighter-rouge">bash hdfs dfs</code>, mas existe tamb√©m a possibilidade de utilizar o comando depreciado <code class="highlighter-rouge">bash hadoop fs</code>.</p>

<p>Criar um diret√≥rio:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#Comando</span>
hdfs dfs <span class="nt">-mkdir</span> &lt;paths&gt;
<span class="c">#Exemplo</span>
~<span class="nv">$ </span>hdfs dfs <span class="nt">-mkdir</span> /user/hduser/input
</code></pre></div></div>

<p>Listar diret√≥rios:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#Comando</span>
hdfs dfs <span class="nt">-ls</span> &lt;args&gt;
<span class="c">#Exemplo</span>
~<span class="nv">$ </span>hdfs dfs <span class="nt">-ls</span> /user
</code></pre></div></div>

<p>Fazer <em>upload</em> de um arquivo:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#Comando</span>
hdfs dfs <span class="nt">-put</span> &lt;file_path&gt; &lt;hdfs_path&gt;
<span class="c">#Exemplo</span>
~<span class="nv">$ </span>hdfs dfs <span class="nt">-put</span> my_file.txt /user/hduser/input
</code></pre></div></div>

<p>Fazer <em>download</em> de um arquivo:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#Comando</span>
hdfs dfs <span class="nt">-get</span> &lt;hdfs_path&gt; &lt;local_path&gt;
<span class="c">#Exemplo</span>
~<span class="nv">$ </span>hdfs dfs <span class="nt">-get</span> /user/hduser/input/my_file.txt ~/
</code></pre></div></div>

<p>Remover um arquivo:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#Comando</span>
hdfs dfs <span class="nt">-r</span> &lt;file_name&gt;  
<span class="c">#Exemplo</span>
~<span class="nv">$ </span>hdfs dfs <span class="nt">-r</span> /user/hduser/input/my_file.txt
</code></pre></div></div>

<p>Remover um diret√≥rio:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#Comando</span>
hdfs dfs <span class="nt">-rmr</span> &lt;hdfs_path&gt;
<span class="c">#Exemplo</span>
~<span class="nv">$ </span>hdfs dfs <span class="nt">-rmr</span> /user/hduser/input
</code></pre></div></div>

<p>Renomear um arquivo:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#Comando</span>
hdfs dfs <span class="nt">-mv</span> &lt;file_name&gt; &lt;file_name&gt;
<span class="c">#Exemplo</span>
~<span class="nv">$ </span>hdfs dfs <span class="nt">-mv</span> /user/hduser/input/my_file.txt /user/hduser/input/file.txt
</code></pre></div></div>

<p>Mover um arquivo:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#Comando</span>
hdfs dfs <span class="nt">-mv</span> &lt;hdfs_src&gt; &lt;hdfs_dest&gt;
<span class="c">#Exemplo</span>
~<span class="nv">$ </span>hdfs dfs <span class="nt">-mv</span> /user/hduser/input/my_file.txt /user/hduser
</code></pre></div></div>

<p>Mover um diret√≥rio:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#Comando</span>
hdfs dfs <span class="nt">-mv</span> &lt;hdfs_dir&gt; &lt;hdfs_dir&gt;
<span class="c">#Exemplo</span>
~<span class="nv">$ </span>hdfs dfs <span class="nt">-mv</span> /user/hduser/input /user
</code></pre></div></div>

<p>Mostrar o tamanho do arquivo em <em>bytes</em>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#Comando</span>
hdfs dfs <span class="nt">-du</span> &lt;file or directory&gt;
<span class="c">#Exemplo</span>
~<span class="nv">$ </span>hdfs dfs <span class="nt">-du</span> /user/hduser/input/my_file.txt
~<span class="nv">$ </span>hdfs dfs <span class="nt">-du</span> /user/hduser/input/
</code></pre></div></div>

<p>Visualizar o conte√∫do de um arquivo:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#Comando</span>
hdfs dfs <span class="nt">-cat</span> &lt;file&gt;
<span class="c">#Exemplo</span>
~<span class="nv">$ </span>hdfs dfs <span class="nt">-cat</span> /user/hduser/input/my_file.txt
</code></pre></div></div>

<p>Agora voc√™ aprendeu alguns comandos b√°sicos do Hadoop. Agora voc√™ j√° pode gerenciar arquivos no HDFS e aplicar algumas opera√ß√µes b√°sicas :)</p>

<p style="text-align: center;">
  <img src="/assets/images/coding-awesome.gif" style="width: 60%;" />
</p>

<h2 id="disclaimer">Disclaimer</h2>

<p>Material desenvolvido durante o meu Mestrado no Instituto de Ci√™ncias Matem√°ticas e de Computa√ß√£o da Universidade de S√£o Paulo (<a href="http://icmc.usp.br/" target="_blank">ICMC-USP</a>). Al√©m disso, fa√ßo um agradecimento em especial ao Laborat√≥rio de Sistemas Distribu√≠dos e Programa√ß√£o Concorrente (<a href="http://lasdpc.icmc.usp.br/" target="_blank">LaSDPC</a>), o qual fa√ßo parte que me permitiu a cria√ß√£o deste material. Por fim, informo que √© permitido livremente a reprodu√ß√£o integral deste material desde que sejam feitas as devidas refer√™ncias ao autor ;)</p>

<h2 id="refer√™ncias">Refer√™ncias</h2>

<p>[1] Apache Foundation. Hadoop: <strong>Apache Hadoop</strong>. Acessado em Agosto de 2016. Dispon√≠vel em: <a href="http://hadoop.apache.org">http://hadoop.apache.org</a>
Dzone</p>

<p>[2] Dzone/Big Data Zone. <strong><em>Top 10 Hadoop Shell Commands to Manage HDFS</em></strong>. Acessado em Outubro de 2016. Dispon√≠vel em <a href="https://dzone.com/articles/top-10-hadoop-shell-commands">https://dzone.com/articles/top-10-hadoop-shell-commands</a></p>
:ET